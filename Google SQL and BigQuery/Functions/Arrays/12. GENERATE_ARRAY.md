🚀 **BigQuery Tip of the Day: `GENERATE_ARRAY()` Explained with Examples**

If you’re working with arrays in BigQuery, one of the most useful (and underrated) functions you’ll come across is **`GENERATE_ARRAY()`**. It’s a super handy way to create arrays of numbers directly in SQL — no loops, no extra logic needed. 💡

### 🔧 Syntax:

```sql
GENERATE_ARRAY(start_expression, end_expression [, step_expression])
```

* `start_expression`: The starting value (inclusive)
* `end_expression`: The ending value (inclusive)
* `step_expression` *(optional)*: The increment (default is `1`)

👉 Supported data types: `INT64`, `NUMERIC`, `BIGNUMERIC`, `FLOAT64`

---

### 📊 Examples:

✅ **Basic usage:**

```sql
SELECT GENERATE_ARRAY(1, 5) AS example_array;
-- [1, 2, 3, 4, 5]
```

✅ **Custom step:**

```sql
SELECT GENERATE_ARRAY(0, 10, 3) AS example_array;
-- [0, 3, 6, 9]
```

✅ **Negative step:**

```sql
SELECT GENERATE_ARRAY(10, 0, -3) AS example_array;
-- [10, 7, 4, 1]
```

✅ **Single value (start == end):**

```sql
SELECT GENERATE_ARRAY(4, 4, 10);
-- [4]
```

✅ **Empty array (no valid range):**

```sql
SELECT GENERATE_ARRAY(10, 0, 3);
-- []
```

✅ **NULL array:**

```sql
SELECT GENERATE_ARRAY(5, NULL, 1);
-- NULL
```

✅ **Generate arrays dynamically:**

```sql
SELECT GENERATE_ARRAY(start, 5) AS example_array
FROM UNNEST([3, 4, 5]) AS start;
-- [3,4,5], [4,5], [5]
```

💡 **Use cases:**

* Generating ranges for JOINs or time-series data
* Simulating sequences without a numbers table
* Creating test datasets quickly

💡 **Today I solved a real-world problem in BigQuery using just one simple function: `GENERATE_ARRAY()` 🚀**

Here’s the scenario 👇
I was working on a report where I needed to **generate a range of dates dynamically** — but I didn’t have a calendar table handy. Instead of creating one, I reached straight for one of my favorite BigQuery tricks: `GENERATE_ARRAY()` 💡

---

🔧 **What it does:**
`GENERATE_ARRAY()` lets you create an array of numbers directly in SQL. Perfect when you need sequences for time series, data joins, or testing.

Here’s how I used it ⬇️

✅ **Example: Generate the last 10 days as an array of integers**

```sql
SELECT GENERATE_ARRAY(1, 10) AS days;
```

📊 Output:

```
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
```

---

✅ **Real-world scenario: Generate dates for the last 10 days**

```sql
SELECT 
  DATE_SUB(CURRENT_DATE(), INTERVAL day DAY) AS report_date
FROM UNNEST(GENERATE_ARRAY(0, 9)) AS day
ORDER BY report_date;
```

📊 Output:

```
2025-10-08
2025-10-07
2025-10-06
...
2025-09-29
```

With this simple query, I created a **dynamic date series without any external table** — and was able to join it with my metrics table to fill in missing days. ✅

---

💡 **Other use cases where `GENERATE_ARRAY()` shines:**

* Generating test data quickly
* Expanding rows for time series analysis
* Filling in missing ranges in reports
* Creating numeric buckets for data segmentation

🔥 Pro Tip: Combine `GENERATE_ARRAY()` with `UNNEST()` to expand rows and create powerful analytical queries.

Have you used `GENERATE_ARRAY()` in your projects? Share your favorite use case in the comments 👇

#BigQuery #GoogleCloud #DataEngineering #SQLTips #CloudAnalytics #GCP #DataAnalytics


